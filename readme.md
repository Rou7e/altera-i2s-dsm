# Репозиторий DSM конвертера под платформы Altera

## Инструменты, требуемые для работы с репозиторием на Windows 10
1) Quartus (Quartus Prime 22.1std) Standard Edition
2) Icarus Verilog
3) GTKWave
4) Python 3.9 (matplotlib, numpy, scipy)    

## Структура репозитория
1) В директории src - верилог файлы обвязки конвертера
2) В субмодуле FPGA_PCM2DSD - математическая часть конвертера
3) В директории tests - скрипты для проведения поведенческой симуляции дизайна
4) В директории reports - отчеты по временной симуляции дизайна на разных платформах и в разных конфигурациях
5) В директории doc - графическая документация по последней версии дизайна

## Текущая платформа
### [EP4CE6E22C8N](https://www.ozon.ru/product/plis-programmiruemaya-logicheskaya-matritsa-fpga-ep4ce6e22c8n-cyclone-iv-1093914217/?asb=N5wYt%252BaH0qcwIBBNYhuIwLbHfrLuPQmWn5oLiPnM7Q0%253D&asb2=0UiveHWkGXrzK1n1i5V60SJhOzw3VAqL6g7dPZYsrvH12_H5DMWHWmFufp7zbxgf&avtc=1&avte=2&avts=1701128002&keywords=fpga+altera+ciclon+4)

## Текущая распиновка
| Название сигнала | Направление | Номер пина |
|---|---|---|
| DSD_ON | Input | PIN_121 |
| DSDCLK | Output | PIN_67 |
| DSDLEFT | Output | PIN_68 |
| DSDRIGHT | Output | PIN_69 |
| I2S_BCKorDSDCLK | Input | PIN_113 |
| I2S_DATAorDSD1 | Input | PIN_115 |
| I2S_LRCKorDSD2 | Input | PIN_114 |
| I2S_RST | Input | PIN_120 |
|---|---|---|
## Заложенные режимы работы
1) Тест на максимальной частоте: PCM32 на входе DSD512 на выходе 
2) Тест на пониженной частоте: PCM32 в DSD64
3) Тест на сниженной разрядности: PCM16 в DSD512
4) Тест на сквозной пропуск данных по поднятому флагу от конвертера: DSD512 в DSD512

## Текущие параметры
1) Поведенческая симуляция реализована и проведена для режима 1 из списка выше (остальные 3 режима также могут (и по идее, должны) работать, но пока подтверждений нет)
2) На таймингах - устройство способно к работе в режиме максимальной нагрузки (DSD512 + PCM32). 

## Рекомендации по дальнейшему внедрению прошивки
1) Необходимо обеспечить стабильный температурный режим, так как повышение температуры выше 85 градусов приводит к ошибкам синхронизации. При этом, теоретически не предполагается, что сам ПЛИС будет рассеивать значительное количество тепла. 
2) Также необходимо ввести автоматическую процедуру диагностики каждого выпускаемого устройства, чтобы убедиться, что Speed Grade отвечает заявленному производителем значению, так как его понижение также приводит к нарушению работы устройства при пиковой загруженности.
3) При проектировании печатной платы, следует следить за задеркжами сигнала, обеспеченными топологией ПП, не допускать превышения им 5 нс на каждом канале.

## Перспективы улучшения дизайна
1) Следует отработать оставшиеся три сценария работы в поведенческой симуляции.